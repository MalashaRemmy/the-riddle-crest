<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Riddle Crest Pro - Brain Challenge</title>
    <meta name="theme-color" content="#1a1a2e">
    <meta name="description" content="Challenge your mind with progressive riddles across multiple rounds">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- iOS Support -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="icons/icon-192.png">
    
    <!-- Fonts -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- CSS -->
    <link rel="stylesheet" href="style.css">
    
    <!-- Meta for App Stores -->
    <meta property="og:title" content="Riddle Crest Pro">
    <meta property="og:description" content="Brain training game with 50 progressive riddles">
    <meta property="og:image" content="icons/icon-512.png">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="screen active">
        <div class="loading-container">
            <div class="spinner"></div>
            <h2>Loading Riddle Crest...</h2>
            <p>Preparing your brain challenge</p>
        </div>
    </div>

    <!-- Login Screen -->
    <section id="login-screen" class="screen">
        <div class="auth-card">
            <div class="app-brand">
                <i class="fas fa-crown"></i>
                <h1>Riddle Crest Pro</h1>
                <p class="tagline">Train Your Brain ‚Ä¢ Unlock Wisdom</p>
            </div>
            
            <div class="auth-tabs">
                <button class="tab-btn active" data-tab="login">Login</button>
                <button class="tab-btn" data-tab="signup">Sign Up</button>
            </div>
            
            <!-- Login Form -->
            <form id="login-form" class="auth-form active">
                <div class="input-group">
                    <label for="login-email">
                        <i class="fas fa-envelope"></i> Email
                    </label>
                    <input type="email" id="login-email" required 
                           placeholder="your.email@example.com">
                </div>
                
                <div class="input-group">
                    <label for="login-password">
                        <i class="fas fa-lock"></i> Password
                    </label>
                    <input type="password" id="login-password" required 
                           placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                </div>
                
                <button type="submit" class="btn-primary auth-btn">
                    <i class="fas fa-sign-in-alt"></i> Login
                </button>
                
                <div class="divider">
                    <span>or continue with</span>
                </div>
                
                <button type="button" id="guest-login" class="btn-secondary">
                    <i class="fas fa-user-clock"></i> Play as Guest
                </button>
            </form>
            
            <!-- Signup Form -->
            <form id="signup-form" class="auth-form">
                <div class="input-group">
                    <label for="signup-email">
                        <i class="fas fa-envelope"></i> Email
                    </label>
                    <input type="email" id="signup-email" required 
                           placeholder="your.email@example.com">
                </div>
                
                <div class="input-group">
                    <label for="signup-phone">
                        <i class="fas fa-phone"></i> Phone Number
                    </label>
                    <input type="tel" id="signup-phone" required 
                           placeholder="+1234567890" pattern="[+][0-9]{10,15}">
                </div>
                
                <button type="submit" class="btn-primary auth-btn">
                    <i class="fas fa-user-plus"></i> Send OTP
                </button>
                
                <p class="terms">
                    By signing up, you agree to our 
                    <a href="#" class="link">Terms of Service</a> and 
                    <a href="#" class="link">Privacy Policy</a>
                </p>
            </form>
            
            <div class="auth-footer">
                <p>Already have an account? <a href="#" class="link switch-tab">Login</a></p>
            </div>
        </div>
    </section>

    <!-- OTP Verification Screen -->
    <section id="otp-screen" class="screen">
        <div class="auth-card">
            <div class="back-btn" id="back-to-signup">
                <i class="fas fa-arrow-left"></i>
            </div>
            
            <div class="otp-header">
                <i class="fas fa-sms"></i>
                <h2>Verify Your Account</h2>
                <p class="otp-instruction">
                    We've sent a 6-digit code to your phone
                    <span id="phone-mask">+1 ‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢890</span>
                </p>
            </div>
            
            <div class="otp-container">
                <div class="otp-inputs">
                    <input type="text" class="otp-digit" maxlength="1" data-index="0">
                    <input type="text" class="otp-digit" maxlength="1" data-index="1">
                    <input type="text" class="otp-digit" maxlength="1" data-index="2">
                    <input type="text" class="otp-digit" maxlength="1" data-index="3">
                    <input type="text" class="otp-digit" maxlength="1" data-index="4">
                    <input type="text" class="otp-digit" maxlength="1" data-index="5">
                </div>
                
                <div class="otp-timer">
                    <i class="fas fa-clock"></i>
                    <span id="timer">01:00</span>
                </div>
                
                <button id="verify-otp" class="btn-primary" disabled>
                    <i class="fas fa-check-circle"></i> Verify & Continue
                </button>
                
                <button id="resend-otp" class="btn-text">
                    <i class="fas fa-redo"></i> Resend Code
                </button>
            </div>
        </div>
    </section>

    <!-- Intro Screen -->
    <section id="intro-screen" class="screen">
        <div class="card">
            <div class="user-welcome">
                <div class="avatar">
                    <i class="fas fa-user"></i>
                </div>
                <div>
                    <h3 id="user-greeting">Welcome, Player!</h3>
                    <p class="user-status" id="user-status">Guest Account</p>
                </div>
            </div>
            
            <h1><i class="fas fa-crown"></i> Riddle Crest Pro</h1>
            
            <div class="round-info">
                <div class="round-card">
                    <i class="fas fa-trophy"></i>
                    <h4>Current Round</h4>
                    <div class="round-number" id="current-round-display">1</div>
                </div>
                <div class="round-card">
                    <i class="fas fa-brain"></i>
                    <h4>Total Score</h4>
                    <div class="round-number" id="total-score-display">0</div>
                </div>
                <div class="round-card">
                    <i class="fas fa-chart-line"></i>
                    <h4>Best Score</h4>
                    <div class="round-number" id="best-score-display">0</div>
                </div>
            </div>
            
            <div class="rules">
                <h2><i class="fas fa-scroll"></i> Progressive Challenge</h2>
                <ul>
                    <li><i class="fas fa-layer-group"></i> <strong>5 Rounds</strong> of increasing difficulty</li>
                    <li><i class="fas fa-puzzle-piece"></i> <strong>10 unique riddles</strong> per round (50 total)</li>
                    <li><i class="fas fa-graduation-cap"></i> <strong>Learn & Improve</strong> - New riddles each round</li>
                    <li><i class="fas fa-history"></i> <strong>Cumulative scoring</strong> across all rounds</li>
                    <li><i class="fas fa-sync-alt"></i> <strong>Round 5</strong> offers a fresh restart option</li>
                </ul>
                
                <div class="scoring">
                    <h3><i class="fas fa-star"></i> Multi-Round Scoring</h3>
                    <p>‚úÖ Correct answer: <strong>+10 points</strong> (per question)</p>
                    <p>üí° Hint used: <strong>-2 points</strong> (per hint)</p>
                    <p>üéØ Round bonus: <strong>+50 points</strong> (for perfect round)</p>
                    <p>üèÜ Max total score: <strong>2500 points</strong> (5 perfect rounds)</p>
                </div>
            </div>
            
            <div class="round-progress">
                <h3><i class="fas fa-flag-checkered"></i> Round Progress</h3>
                <div class="progress-rounds">
                    <div class="round-dot active" data-round="1">1</div>
                    <div class="round-dot" data-round="2">2</div>
                    <div class="round-dot" data-round="3">3</div>
                    <div class="round-dot" data-round="4">4</div>
                    <div class="round-dot" data-round="5">5</div>
                </div>
            </div>
            
            <button id="start-btn" class="btn-primary">
                <i class="fas fa-play"></i> Start Round 1
            </button>
            
            <button id="logout-btn" class="btn-text">
                <i class="fas fa-sign-out-alt"></i> Switch Account
            </button>
        </div>
    </section>

    <!-- Game Screen -->
    <section id="game-screen" class="screen">
        <header class="game-header">
            <div class="round-header">
                <span class="round-badge">Round <span id="current-round">1</span>/5</span>
                <span class="question-counter">Question <span id="current-question">1</span>/10</span>
            </div>
            
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
            </div>
            
            <div class="game-stats">
                <div class="stat">
                    <i class="fas fa-lightbulb"></i>
                    <span id="hint-count">0</span>
                </div>
                <div class="stat">
                    <i class="fas fa-brain"></i>
                    <span id="score-preview">0</span>
                </div>
                <div class="stat">
                    <i class="fas fa-clock"></i>
                    <span id="timer-display">--:--</span>
                </div>
            </div>
        </header>

        <main class="game-main">
            <div class="riddle-card">
                <div class="difficulty-indicator">
                    <span class="difficulty-badge" id="difficulty-badge">Easy</span>
                </div>
                
                <h2 id="riddle-question">Loading riddle...</h2>
                
                <div class="category-tag">
                    <i class="fas fa-tag"></i>
                    <span id="riddle-category">Logic</span>
                </div>
                
                <div class="hint-section">
                    <button id="hint-btn" class="btn-hint">
                        <i class="fas fa-lightbulb"></i> 
                        <span class="hint-text">Need a hint? (-2 pts)</span>
                    </button>
                    <div id="hint-display" class="hint-display"></div>
                </div>

                <div class="answer-section">
                    <input 
                        type="text" 
                        id="answer-input" 
                        placeholder="Type your answer here..."
                        autocomplete="off"
                        autocapitalize="off"
                        spellcheck="false"
                    >
                    <button id="submit-btn" class="btn-submit">
                        <i class="fas fa-paper-plane"></i> Submit Answer
                    </button>
                </div>

                <div class="navigation">
                    <button id="prev-btn" class="btn-secondary" disabled>
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button id="next-btn" class="btn-secondary">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>
        </main>
    </section>

    <!-- Round Complete Screen -->
    <section id="round-complete-screen" class="screen">
        <div class="card">
            <div class="round-complete-header">
                <div class="confetti">
                    <i class="fas fa-confetti"></i>
                </div>
                <h1>Round <span id="completed-round">1</span> Complete!</h1>
                <p class="round-subtitle">Great work! Ready for the next challenge?</p>
            </div>
            
            <div class="round-scoreboard">
                <div class="score-card round">
                    <h3>Round Score</h3>
                    <div class="score-value" id="round-score">0</div>
                    <div class="score-max">/ 100</div>
                </div>
                
                <div class="score-card total">
                    <h3>Total Score</h3>
                    <div class="score-value" id="cumulative-score">0</div>
                    <div class="score-max">/ 500</div>
                </div>
                
                <div class="score-card correct">
                    <h3>Correct</h3>
                    <div class="score-value" id="round-correct">0</div>
                    <div class="score-max">/ 10</div>
                </div>
            </div>
            
            <div class="round-breakdown">
                <h3><i class="fas fa-chart-bar"></i> Round Breakdown</h3>
                <div class="breakdown-grid">
                    <div class="breakdown-item">
                        <span>Correct Answers</span>
                        <span id="breakdown-correct">0</span>
                    </div>
                    <div class="breakdown-item">
                        <span>Hints Used</span>
                        <span id="breakdown-hints">0</span>
                    </div>
                    <div class="breakdown-item">
                        <span>Hint Penalty</span>
                        <span class="negative">-<span id="breakdown-penalty">0</span> pts</span>
                    </div>
                    <div class="breakdown-item bonus">
                        <span>Perfect Round Bonus</span>
                        <span class="positive" id="round-bonus">+0 pts</span>
                    </div>
                </div>
            </div>
            
            <div class="progression-warning" id="progression-warning">
                <i class="fas fa-exclamation-triangle"></i>
                <p>Playing again will replace this round's questions with new ones.</p>
            </div>
            
            <div class="action-buttons">
                <button id="next-round-btn" class="btn-primary">
                    <i class="fas fa-forward"></i> Continue to Round <span id="next-round-number">2</span>
                </button>
                
                <button id="view-results-btn" class="btn-secondary">
                    <i class="fas fa-chart-pie"></i> View Detailed Results
                </button>
                
                <button id="play-again-round" class="btn-secondary">
                    <i class="fas fa-redo"></i> Replay This Round
                </button>
            </div>
            
            <div class="continue-info">
                <p><i class="fas fa-info-circle"></i> Each round has completely new riddles to prevent memorization</p>
            </div>
        </div>
    </section>

    <!-- Final Results Screen -->
    <section id="results-screen" class="screen">
        <div class="card">
            <h1><i class="fas fa-trophy"></i> Challenge Complete!</h1>
            
            <div class="final-score-display">
                <div class="final-score-circle">
                    <div class="score-inner">
                        <span id="final-score">0</span>
                        <div class="score-label">/ 500</div>
                    </div>
                    <div class="score-ring"></div>
                </div>
                
                <h2 id="performance-title">Riddle Novice</h2>
                <p id="performance-description" class="performance-desc">
                    You've completed all 5 rounds! Great perseverance.
                </p>
            </div>

            <div class="final-results-grid">
                <div class="final-result-card">
                    <h3><i class="fas fa-check-circle"></i> Total Correct</h3>
                    <div class="final-value" id="final-correct-count">0</div>
                    <p>out of 50 riddles</p>
                </div>
                
                <div class="final-result-card">
                    <h3><i class="fas fa-lightbulb"></i> Total Hints</h3>
                    <div class="final-value" id="final-hints">0</div>
                    <p><span id="final-penalty">0</span> pts deducted</p>
                </div>
                
                <div class="final-result-card">
                    <h3><i class="fas fa-star"></i> Performance</h3>
                    <div class="final-value tier" id="performance-tier">C</div>
                    <p id="performance-message">Good effort!</p>
                </div>
                
                <div class="final-result-card">
                    <h3><i class="fas fa-medal"></i> Best Round</h3>
                    <div class="final-value" id="best-round-score">0</div>
                    <p>Round <span id="best-round-number">1</span></p>
                </div>
            </div>

            <div class="round-progress-final">
                <h3><i class="fas fa-layer-group"></i> Round-by-Round Performance</h3>
                <div id="round-chart"></div>
            </div>

            <div class="restart-options">
                <h3><i class="fas fa-sync-alt"></i> Continue Challenge</h3>
                <div class="restart-warning" id="final-warning">
                    <i class="fas fa-exclamation-circle"></i>
                    <p>Starting over will reset ALL progress and use new riddles.</p>
                </div>
                
                <div class="restart-buttons">
                    <button id="full-restart-btn" class="btn-primary">
                        <i class="fas fa-rocket"></i> Start Fresh Challenge
                    </button>
                    
                    <button id="practice-mode-btn" class="btn-secondary">
                        <i class="fas fa-graduation-cap"></i> Practice Missed Riddles
                    </button>
                    
                    <button id="back-to-menu-btn" class="btn-text">
                        <i class="fas fa-home"></i> Return to Main Menu
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Bottom Navigation (Mobile) -->
    <nav class="bottom-nav">
        <button class="nav-btn" data-screen="intro">
            <i class="fas fa-home"></i>
            <span>Home</span>
        </button>
        <button class="nav-btn" data-screen="game">
            <i class="fas fa-play"></i>
            <span>Play</span>
        </button>
        <button class="nav-btn" data-screen="results">
            <i class="fas fa-trophy"></i>
            <span>Results</span>
        </button>
        <button class="nav-btn" id="profile-btn">
            <i class="fas fa-user"></i>
            <span>Profile</span>
        </button>
    </nav>

    <!-- Toast Notifications -->
    <div id="toast-container"></div>

    <!-- Scripts -->
    <script src="script.js"></script>
    
    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('service-worker.js')
                    .then(registration => {
                        console.log('ServiceWorker registered');
                    })
                    .catch(err => {
                        console.log('ServiceWorker registration failed: ', err);
                    });
            });
        }
    </script>
</body>
</html>